@model List<Experience>

<section id="section4" class="py-24 bg-slate-200 relative overflow-hidden">

    <div class="container mx-auto px-6">

        <div class="text-center mb-16">
            <span class="text-brand-600 font-bold tracking-wider uppercase text-sm bg-brand-100 px-3 py-1 rounded-full">Kariyer Yolu</span>
            <h2 class="text-4xl font-extrabold text-slate-900 mt-4">Deneyim & Geçmiş</h2>
            <p class="text-slate-500 mt-4 max-w-2xl mx-auto">
                Profesyonel iş hayatımda yer aldığım projeler ve çalıştığım kurumlar.
            </p>
        </div>

        @if (Model != null && Model.Any())
        {
            <div class="relative max-w-5xl mx-auto">

                <div class="absolute left-8 md:left-1/2 top-0 h-full w-0.5 bg-gray-200 transform md:-translate-x-1/2"></div>

                <div class="space-y-12">
                    @{
                        // Deneyimleri tarihe göre tersten sıralayalım (En yeni en üstte)
                        // Workdate string olduğu için sıralama veritabanı ID'sine göre de olabilir,
                        // şimdilik gelen sırayı ters çeviriyoruz.
                        var sortedList = Model.OrderByDescending(x => x.ExperienceId).ToList();
                        int index = 0;
                    }

                    @foreach (var item in sortedList)
                    {
                        // Tek - Çift Kontrolü (Sağ mı Sol mu?)
                        bool isEven = index % 2 == 0;
                        string alignmentClass = isEven ? "md:flex-row-reverse" : "md:flex-row";
                        string textAlignment = isEven ? "md:text-right" : "md:text-left";

                        // Mobilde margin ayarı
                        string contentMargin = isEven ? "md:mr-auto" : "md:ml-auto";

                        <div class="relative flex items-center @alignmentClass">

                            <div class="absolute left-8 md:left-1/2 transform -translate-x-1/2 w-8 h-8 rounded-full border-4 border-white bg-brand-600 shadow-lg z-10 flex items-center justify-center">
                                <div class="w-2 h-2 bg-white rounded-full"></div>
                            </div>

                            <div class="ml-20 md:ml-0 w-full md:w-5/12 @contentMargin">
                                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-xl transition-all duration-300 group cursor-default relative">

                                    <div class="hidden md:block absolute top-1/2 transform -translate-y-1/2 w-4 h-4 bg-white border-t border-l border-gray-100 rotate-45
                                        @(isEven ? "-right-2 border-r-0 border-b-0" : "-left-2 border-t-0 border-r-0 border-gray-200")">
                                    </div>

                                    <span class="inline-block px-3 py-1 bg-brand-50 text-brand-700 text-xs font-bold rounded-lg mb-3">
                                        @item.Workdate
                                    </span>

                                    <h3 class="text-xl font-bold text-slate-800 group-hover:text-brand-600 transition-colors">
                                        @item.Title
                                    </h3>

                                    <div class="flex items-center gap-2 mt-1 mb-3 text-slate-500 font-medium text-sm">
                                        <i class="bi bi-building"></i>
                                        <span>@item.CompanyName</span>
                                    </div>

                                    <p class="text-slate-600 text-sm leading-relaxed">
                                        @item.Description
                                    </p>

                                </div>
                            </div>

                        </div>

                        index++;
                    }
                </div>
            </div>
        }
        else
        {
            <div class="text-center py-12">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 text-gray-400 mb-4">
                    <i class="bi bi-briefcase text-2xl"></i>
                </div>
                <p class="text-slate-500">Henüz deneyim bilgisi eklenmemiş.</p>
            </div>
        }

    </div>
</section>